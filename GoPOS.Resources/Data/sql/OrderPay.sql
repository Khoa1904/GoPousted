<GetOrderFuncKey>
SELECT A.FK_NO      
    , A.FK_NAME
    , A.AUTH_YN     
    , A.IMG_FILE_NAME
    , B.POSITION_NO
    , CAST(B.COL_NUM AS SMALLINT) AS COL_NUM
    , CAST(B.ROW_NUM AS SMALLINT) AS ROW_NUM
    , CAST(B.WIDTH_NUM AS SMALLINT) AS WIDTH_NUM
    , CAST(B.HEIGHT_NUM AS SMALLINT) AS HEIGHT_NUM
    , COALESCE( A.USE_YN, 'N' ) AS USE_YN 
FROM MST_SHOP_FUNC_KEY A INNER JOIN MST_POS_FUNC_KEY B
                            ON B.SHOP_CODE = A.SHOP_CODE     
                        AND B.FN_NO   = A.FK_NO                             
WHERE A.SHOP_CODE   = @SHOP_CODE
AND A.FK_FLAG     = @FK_FLAG
AND A.USE_YN    = 'Y'
AND B.POSITION_NO  IS NOT NULL 
ORDER BY B.POSITION_NO;
--ORDER BY        -- KHOA THÊM CHƠI
--    CASE
--        WHEN CAST(B.POSITION_NO  AS INTEGER) IS NOT NULL THEN B.POSITION_NO  
--        ELSE 99
--    END
</GetOrderFuncKey>
<GetTouchClasses>
SELECT 
	SHOP_CODE, 
	TU_FLAG, 
	TU_CLASS_CODE, 
	TU_CLASS_NAME, 
	CAST(TU_PAGE AS SMALLINT) AS TU_PAGE, 
	CAST(POSITION_NO AS SMALLINT) AS POSITION_NO, 	
	CAST(X AS SMALLINT) AS X, 
	CAST(Y AS SMALLINT) AS Y, 
	CAST(WIDTH AS SMALLINT) AS WIDTH, 
	CAST(HEIGHT AS SMALLINT) AS HEIGHT, 
	INSERT_DT, 
	UPDATE_DT
FROM MST_TUCH_CLASS
WHERE SHOP_CODE = @SHOP_CODE AND TU_FLAG = 'S'
</GetTouchClasses>
<GetTouchProducts>
SELECT 
mtp.SHOP_CODE, 
mtp.TU_FLAG , 
mtp.TU_CLASS_CODE , 
mtp.TU_KEY_CODE , 
mtp.PRD_CODE , 
mip.PRD_NAME ,  
mip.SALE_UPRC,
mip.TAX_YN,
mip.STOCK_OUT_YN,
CAST(mtp.TU_PAGE AS SMALLINT) AS TU_PAGE , 
CAST(mtp.X AS SMALLINT) AS X, 
CAST(mtp.Y AS SMALLINT) AS Y, 
CAST(mtp.WIDTH AS SMALLINT) AS WIDTH , 
CAST(mtp.HEIGHT AS SMALLINT) AS HEIGHT,
mip.SIDE_MENU_YN,
mip.SET_PRD_FLAG,
mip.PRD_DC_FLAG,
mip.CST_ACCDC_YN,
'0' AS PRD_TYPE_CODE,
mip.STAMP_ACC_YN,
mip.STAMP_ACC_QTY,
mip.STAMP_USE_YN,
mip.STAMP_USE_QTY,
mip.PRICE_MGR_FLAG
FROM MST_TUCH_PRODUCT mtp 
LEFT JOIN MST_INFO_PRODUCT mip ON mtp.SHOP_CODE = mip.SHOP_CODE AND mtp.PRD_CODE = mip.PRD_CODE
WHERE mtp.SHOP_CODE = @SHOP_CODE AND mtp.TU_FLAG = 'S' AND mtp.TU_CLASS_CODE = @TU_CLASS_CODE
</GetTouchProducts>
<GetSideMenus>
SELECT DISTINCT *
FROM (
   SELECT DISTINCT
      sdc.SDA_CLASS_CODE AS CLASS_CODE, 
      sdc.SDA_CLASS_NAME || ' [속성]' AS CLASS_NAME,
      sdc.SDA_CLASS_CODE || sdc.SDA_CODE AS SUB_CODE, 
      sdc.SDA_NAME AS SUB_NAME,
      CAST(sdc.SDA_ORDER_SEQ AS INT) AS ORDER_SEQ,
      CAST(0 AS INT) AS MAX_QTY,
      CAST(0 AS DECIMAL) AS UNIT_PRICE,
      'P' AS CLASS_TYPE,
      '2' AS PRD_TYPE_FLAG,
        mip.TAX_YN,
      mip.PRD_CODE,
      mip.SHOP_CODE
   FROM MST_INFO_PRODUCT mip
      LEFT JOIN (
         SELECT MSDC3.SDA_CLASS_CODE, MSDC3.SDA_CLASS_NAME, 
         msdc.SDA_CODE, MSDC.SDA_NAME, MSDC.SDA_ORDER_SEQ
         FROM MST_SIDE_DETP_CODE msdc 
            LEFT JOIN MST_SIDE_DEPT_CLASS msdc2 
               ON MSDC.SHOP_CODE = MSDC2.SHOP_CODE
               AND MSDC.SDA_CLASS_CODE = MSDC2.SDA_CLASS_CODE
            LEFT JOIN MST_SIDE_DEPT_CLASS msdc3
               ON MSDC.SHOP_CODE = MSDC3.SHOP_CODE
               AND MSDC.SDA_CLASS_CODE = MSDC3.SDA_CLASS_CODE  
         WHERE MSDC.USE_YN = 'Y'
      ) sdc ON sdc.SDA_CLASS_CODE = mip.SDA_CLASS_CODE
   WHERE mip.SIDE_MENU_YN = 'Y' 
         AND sdc.SDA_CLASS_CODE IS NOT NULL
   UNION
   SELECT DISTINCT 
      sc.SDS_CLASS_CODE AS CLASS_CODE,
      sc.SDS_CLASS_NAME || ' [선택]' AS CLASS_NAME,
      sip.PRD_CODE AS SUB_CODE,
      sip.PRD_NAME AS SUB_NAME,
      CAST(lc.SDS_ORDER_SEQ AS INT) AS ORDER_SEQ,
      CAST(sc.SDS_MAX_QTY AS INT) AS MAX_QTY,
      lc.SDS_PRD_UPRC AS UNIT_PRICE,
      'S' AS CLASS_TYPE,
      '1' AS PRD_TYPE_FLAG,
        mip.TAX_YN,
      mip.PRD_CODE,
      mip.SHOP_CODE
   FROM MST_SIDE_SEL_GROUP sg
      LEFT JOIN MST_INFO_PRODUCT mip 
         ON sg.SHOP_CODE = mip.SHOP_CODE 
            AND sg.SDS_GROUP_CODE = mip.SDS_GROUP_CODE
      LEFT JOIN MST_SIDE_SEL_CLASS sc 
         ON sg.SHOP_CODE = sc.SHOP_CODE
            AND sg.SDS_GROUP_CODE = sc.SDS_GROUP_CODE
      LEFT JOIN MST_SIDE_SEL_CODE lc
         ON sc.SDS_CLASS_CODE = lc.SDS_CLASS_CODE
         --AND lc.PRD_CODE = mip.PRD_CODE
      LEFT JOIN MST_INFO_PRODUCT sip 
         ON sip.PRD_CODE = lc.PRD_CODE 
   WHERE sg.USE_YN = 'Y' AND sc.USE_YN = 'Y' AND lc.USE_YN = 'Y'
) side
WHERE side.PRD_CODE = @PRD_CODE AND side.SHOP_CODE = @SHOP_CODE
ORDER BY side.CLASS_TYPE, side.CLASS_CODE, side.SUB_CODE, side.ORDER_SEQ;		
</GetSideMenus>
<GetFixDiscountList>
SELECT 
	MIFD.DC_NO,
	MIFD.DC_DIV_FLAG,
	MIFD.DC_TYPE_FLAG,
	MIFD.DC_VALUE,
	MIFD.DISP_SEQ_NO,
	MIFD.CLOSE_YN
FROM MST_INFO_FIX_DC mifd 
WHERE MIFD.USE_YN = 'Y' AND MIFD.SHOP_CODE = @SHOP_CODE;
</GetFixDiscountList>
<GetInfoShopList> 
SELECT SHOP_NAME , 
       TEL_NO , 
	   ADDR , 
	   ADDR_DTL , 
	   OWNER_NAME, 
	   BIZ_NO 
FROM MST_INFO_SHOP
WHERE SHOP_CODE = @SHOP_CODE
</GetInfoShopList>
<GetPRDName> 
SELECT PRD_CODE , PRD_NAME 
FROM MST_INFO_PRODUCT
WHERE PRD_CODE = @PRD_CODE
</GetPRDName>

 -- region Voucher
<GetAllVoucherTicketClassList>
SELECT SHOP_CODE, 
       TK_CLASS_FLAG, 
       TK_CLASS_CODE, 
       TK_CLASS_NAME, 
       USE_YN, 
       INSERT_DT, 
       UPDATE_DT
FROM   MST_INFO_TICKET_CLASS
WHERE  TK_CLASS_FLAG = 'G'
AND    SHOP_CODE = @SHOP_CODE
AND    USE_YN = @USE_YN

</GetAllVoucherTicketClassList>

<GetVoucherTicketList>
SELECT SHOP_CODE, 
       TK_CLASS_FLAG, 
       TK_GFT_CODE, 
       TK_GFT_NAME, 
       TK_GFT_UPRC, 
       TK_GFT_SEQ_YN, 
       TK_CLASS_CODE, 
       USE_YN, 
       INSERT_DT, 
       UPDATE_DT
FROM MST_INFO_TICKET
WHERE  TK_CLASS_CODE = @TK_CLASS_CODE
AND    SHOP_CODE = @SHOP_CODE
AND TK_CLASS_FLAG = 'G'

</GetVoucherTicketList>


 -- region Meal Ticket
<GetMealTicketList>
SELECT SHOP_CODE, 
       TK_CLASS_FLAG , 
	   TK_GFT_CODE , 
	   TK_GFT_NAME , 
	   TK_GFT_UPRC ,
	   TK_GFT_SEQ_YN ,
	   TK_CLASS_CODE , 
	   USE_YN , 
	   INSERT_DT , 
	   UPDATE_DT 
FROM  MST_INFO_TICKET
WHERE SHOP_CODE = @SHOP_CODE
AND TK_CLASS_FLAG = 'M'

</GetMealTicketList>

 -- region Coupon Ticket
<GetCouponList>
SELECT SHOP_CODE, 
       TK_CPN_CODE, 
       TK_CPN_NAME, 
       TK_CLASS_CODE, 
       CPN_DC_FLAG, 
       CPN_DC_RATE, 
       CPN_DC_AMT, 
       CPN_QTY_FLAG, 
       USE_YN, 
       INSERT_DT, 
       UPDATE_DT
FROM MST_INFO_COUPON
WHERE SHOP_CODE = @SHOP_CODE
</GetCouponList>

<GetCouponPRDList>
SELECT PC.SHOP_CODE,  
       PC.TK_CPN_CODE, 
       PC.PRD_CODE, 
       PC.INDEX_NO, 
       PCINSERT_DT, 
       PC.UPDATE_DT
FROM MST_INFO_PRD_COUPON PC
WHERE SHOP_CODE = @SHOP_CODE
</GetCouponPRDList>

<GetCouponDetailList>
SELECT PC.SHOP_CODE,  
       PC.TK_CPN_CODE, 
       PC.PRD_CODE, 
       PC.INDEX_NO, 
       PC.INSERT_DT, 
       PC.UPDATE_DT
FROM MST_INFO_PRD_COUPON PC
WHERE SHOP_CODE = @SHOP_CODE
and TK_CPN_CODE = @TK_CPN_CODE
</GetCouponDetailList>

<GetProductList>
SELECT IP.SHOP_CODE,
       IP.PRD_CODE,
       IP.PRD_NAME,
       IP.LCLASS_CODE,
       IP.MCLASS_CODE,
       IP.SCLASS_CODE,
       IP.BRAND_CODE,
       IP.STYLE_CODE,
       IP.YEAR_CODE,
       IP.SEASON_CODE,
       IP.COLOR_CODE,
       IP.SIZE_CODE,
       IP.SIZE_CLASS_CODE,
       IP.MAP_PRD_CODE,
       IP.CORNER_CODE,
       IP.SPLY_UPRC,
       IP.TOGO_CHARGE,
       IP.DLV_CHARGE,
       IP.CST_ACCDC_YN,
       IP.TAX_YN,
       IP.TIP_MENU_YN,
       IP.ORD_PRD_YN,
       IP.SALE_PRD_YN,
       IP.STOCK_MGR_YN,
       IP.STOCK_OUT_YN,
       IP.SIDE_MENU_YN,
       IP.SDA_CLASS_CODE,
       IP.SDS_GROUP_CODE,
       IP.PRICE_MGR_FLAG,
       IP.SET_PRD_FLAG,
       IP.DEPOSIT_FLAG,
       IP.DEPOSIT_UPRC,
       IP.ORG_PLACE_CODE,
       IP.VENDOR_CODE,
       IP.ORD_UNIT_FLAG,
       IP.ORD_UNIT_QTY,
       IP.ORD_MIN_QTY,
       IP.PRICE_CTRL_FLAG,
       IP.USE_YN,
       IP.FLOOR_PRT_YN,
       IP.INSERT_DT,
       IP.UPDATE_DT,
       IP.POS_PRT_YN,
       IP.PRD_REMARK,
       IP.STAMP_ACC_YN,
       IP.STAMP_ACC_QTY,
       IP.STAMP_USE_YN,
       IP.STAMP_USE_QTY,
       IP.PRD_DC_FLAG,
       IP.KIOSK_IMG_URL,
       IP.KIOSK_IMG_FILE_NAME,
       IP.SOLD_OUT_YN,
       IP.DC_RULE_FLAG,
       IP.DEPOSIT_TYPE,
       IP.DEPOSIT_PRD_CODE,
       IP.DEPOSIT_USE_YN
FROM MST_INFO_PRODUCT IP
INNER JOIN MST_INFO_PRD_COUPON PC ON IP.PRD_CODE = PC.PRD_CODE 
WHERE  PC.SHOP_CODE = @SHOP_CODE
AND PC.TK_CPN_CODE = @TK_CPN_CODE
</GetProductList>

<GetProductList2>
                SELECT  *	  FROM    MST_INFO_PRODUCT 
				WHERE	SHOP_CODE   = @SHOP_CODE
				AND		USE_YN	    = 'Y'
                AND     (@PRD_CODE IS NULL OR PRD_CODE LIKE '%' || @PRD_CODE || '%')
                AND     (@PRD_NAME IS NULL OR PRD_NAME LIKE '%' || @PRD_NAME || '%')
                AND     STOCK_MGR_YN = 'Y'
</GetProductList2>
<GetJoinCardList>
    SELECT SHOP_CODE, 
           JCD_CODE, 
           JCD_NAME, 
           JCD_TYPE_FLAG, 
           VALID_F_DATE, 
           VALID_T_DATE, 
           DC_PRD_FLAG, 
           DC_RATE, 
           DC_LIMIT_FLAG, 
           DC_LIMIT_AMT, 
           APPR_PROC_FLAG, 
           REMARK, 
           INSERT_DT, 
           UPDATE_DT
    FROM MST_INFO_JOINCARD
    WHERE  EXTRACT(YEAR FROM CURRENT_DATE) || RIGHT('0' || EXTRACT(MONTH FROM CURRENT_DATE), 2) 
    || RIGHT('0' || EXTRACT(DAY FROM CURRENT_DATE), 2) BETWEEN VALID_F_DATE AND VALID_T_DATE 
    
</GetJoinCardList>

<GetHoldProducts>
SELECT * FROM 
(SELECT DISTINCT  
m.PRD_NAME, 
p.*, 
m.SIDE_MENU_YN FROM ORD_PRDT p 
LEFT JOIN MST_INFO_PRODUCT m
ON p.SHOP_CODE = m.SHOP_CODE AND p.PRD_CODE = m.PRD_CODE
WHERE p.SHOP_CODE = @SHOP_CODE
		AND p.POS_NO = @POS_NO
		AND p.SALE_DATE = @SALE_DATE
		AND p.ORDER_NO = @ORDER_NO
		AND p.PRD_TYPE_FLAG = '0'		
UNION
SELECT
ss.SDA_NAME AS PRD_NAME,
p.*, 
'N' AS SIDE_MENU_YN
FROM ORD_PRDT p 
LEFT JOIN 
	(SELECT MSDC3.SDA_CLASS_CODE, MSDC3.SDA_CLASS_NAME, 
         msdc.SDA_CODE, MSDC.SDA_NAME, MSDC.SDA_ORDER_SEQ,
         msdc.SHOP_CODE, MSDC3.SDA_CLASS_CODE || msdc.SDA_CODE AS PRD_CODE 
         FROM MST_SIDE_DETP_CODE msdc 
            LEFT JOIN MST_SIDE_DEPT_CLASS msdc2 
               ON MSDC.SHOP_CODE = MSDC2.SHOP_CODE
               AND MSDC.SDA_CLASS_CODE = MSDC2.SDA_CLASS_CODE
            LEFT JOIN MST_SIDE_DEPT_CLASS msdc3
               ON MSDC.SHOP_CODE = MSDC3.SHOP_CODE
               AND msdc2.SDA_CLASS_CODE = MSDC3.SDA_CLASS_CODE  
         WHERE MSDC.USE_YN = 'Y') ss
         	ON ss.PRD_CODE = p.PRD_CODE
         		AND ss.SHOP_CODE = p.SHOP_CODE
         		--AND ss.SDA_CLASS_CODE = p.SDS_CLASS_CODE         		
WHERE p.SHOP_CODE = @SHOP_CODE
		AND p.POS_NO = @POS_NO
		AND p.SALE_DATE = @SALE_DATE
		AND p.ORDER_NO = @ORDER_NO
		AND p.PRD_TYPE_FLAG = '2'
UNION 

SELECT DISTINCT 
m.PRD_NAME, 
p.*, 
'N' AS SIDE_MENU_YN 
FROM ORD_PRDT p 
LEFT JOIN 
	(SELECT mssc.SHOP_CODE, mssc.PRD_CODE, MSDC.SDA_CLASS_CODE
	FROM MST_SIDE_DETP_CODE msdc 
		LEFT JOIN MST_SIDE_DEPT_CLASS msdc2 
			ON MSDC.SHOP_CODE = MSDC2.SHOP_CODE
			AND MSDC.SDA_CLASS_CODE = MSDC2.SDA_CLASS_CODE
		LEFT JOIN MST_SIDE_SEL_CODE mssc
			ON mssc.SHOP_CODE  = msdc2.SHOP_CODE 
			AND msdc2.SDA_CLASS_CODE = mssc.SDS_CLASS_CODE  
	WHERE MSDC.USE_YN = 'Y' AND msdc.SDA_CODE IS NOT NULL) sp
		ON sp.PRD_CODE = p.PRD_CODE AND sp.SHOP_CODE = p.SHOP_CODE
LEFT JOIN MST_INFO_PRODUCT m
	ON p.SHOP_CODE = m.SHOP_CODE AND p.PRD_CODE = m.PRD_CODE	
WHERE p.SHOP_CODE = @SHOP_CODE
		AND p.POS_NO = @POS_NO
		AND p.SALE_DATE = @SALE_DATE
		AND p.ORDER_NO = @ORDER_NO
		AND p.PRD_TYPE_FLAG = '1') S	
ORDER BY SEQ_NO 	
	
</GetHoldProducts>

<GetsoldOutProductList>
SELECT IP.SHOP_CODE,
       IP.PRD_CODE,
       IP.PRD_NAME,
       IP.SALE_UPRC,
       IP.STOCK_OUT_YN,
       '' AS SO_NAME,
       IP.TAX_YN,
       '' AS TY_NAME
FROM MST_INFO_PRODUCT IP
WHERE  SHOP_CODE = @SHOP_CODE
AND (PRD_CODE LIKE  @PRD_CODE)
AND (PRD_NAME LIKE @PRD_NAME)
AND (@STOCK_OUT_YN IS NULL OR IP.STOCK_OUT_YN = @STOCK_OUT_YN)
</GetsoldOutProductList>

<GetTrnTenderSeqList>
SELECT
    TH.SHOP_CODE,
    TH.SALE_DATE,
    TH.POS_NO,
    TH.REGI_SEQ,
    TH.BILL_NO,
    TH.SALE_YN,
    DCM_SALE_AMT,
    ORG_BILL_NO,
    MIN(TH.INSERT_DT) AS INSERT_DT,
    MIN(TH.TOT_DC_AMT) AS TOT_DC_AMT,
    SUM(CASE WHEN TT.PAY_TYPE_FLAG = '01' THEN TT.PAY_AMT ELSE 0 END) AS PAY_AMT_CASH,
    SUM(CASE WHEN TT.PAY_TYPE_FLAG = '03' THEN TT.PAY_AMT ELSE 0 END) AS PAY_AMT_CARD,
    SUM(
        CASE WHEN TT.PAY_TYPE_FLAG IN ('02', '05','03','11') OR (TT.PAY_TYPE_FLAG = '03' AND TC.APPR_PROC_FLAG <> '0') THEN TT.PAY_AMT 
        ELSE 0 END) AS PAY_HAS_APPR,
    SUM(CASE WHEN TT.PAY_TYPE_FLAG NOT IN ('01', '03') THEN TT.PAY_AMT ELSE 0 END) AS PAY_AMT_ALL
FROM
    TRN_HEADER TH
JOIN
    TRN_TENDERSEQ TT ON TH.SHOP_CODE = TT.SHOP_CODE AND TH.SALE_DATE = TT.SALE_DATE
		AND TH.POS_NO = TT.POS_NO AND TH.BILL_NO = TT.BILL_NO AND TH.REGI_SEQ = TT.REGI_SEQ
LEFT JOIN TRN_CARD TC ON TC.SHOP_CODE = TT.SHOP_CODE AND TC.POS_NO = TT.POS_NO AND TC.SALE_DATE = TT.SALE_DATE
        AND TC.BILL_NO = TT.BILL_NO AND TC.REGI_SEQ = TT.REGI_SEQ AND TC.SEQ_NO = TT.LINE_NO
WHERE TH.SHOP_CODE = @SHOP_CODE 
    AND TH.SALE_DATE = @SALE_DATE 
    AND (position(@POS_NO,TH.POS_NO)> 0)
    AND (position(@BILL_NO,TH.BILL_NO)> 0)
GROUP BY
    TH.SHOP_CODE,TH.SALE_DATE,TH.POS_NO,TH.REGI_SEQ,TH.BILL_NO,TH.SALE_YN,TH.DCM_SALE_AMT,ORG_BILL_NO;
</GetTrnTenderSeqList>
<GetPrdProperties>
SELECT DISTINCT *
FROM (
   SELECT DISTINCT
      sdc.SDA_CLASS_CODE AS CLASS_CODE, 
      sdc.SDA_CLASS_NAME || ' [속성]' AS CLASS_NAME,
      sdc.SDA_CLASS_CODE || sdc.SDA_CODE AS PRD_CODE, 
      sdc.SDA_NAME AS PRD_NAME,
      mip.PRD_CODE AS SUB_CODE,
      mip.SHOP_CODE
   FROM MST_INFO_PRODUCT mip
      LEFT JOIN (
         SELECT MSDC3.SDA_CLASS_CODE, MSDC3.SDA_CLASS_NAME, 
         msdc.SDA_CODE, MSDC.SDA_NAME, MSDC.SDA_ORDER_SEQ
         FROM MST_SIDE_DETP_CODE msdc 
            LEFT JOIN MST_SIDE_DEPT_CLASS msdc2 
               ON MSDC.SHOP_CODE = MSDC2.SHOP_CODE
               AND MSDC.SDA_CLASS_CODE = MSDC2.SDA_CLASS_CODE
            LEFT JOIN MST_SIDE_DEPT_CLASS msdc3
               ON MSDC.SHOP_CODE = MSDC3.SHOP_CODE
               AND MSDC.SDA_CLASS_CODE = MSDC3.SDA_CLASS_CODE  
         WHERE MSDC.USE_YN = 'Y'
      ) sdc ON sdc.SDA_CLASS_CODE = mip.SDA_CLASS_CODE
   WHERE mip.SIDE_MENU_YN = 'Y' 
         AND sdc.SDA_CLASS_CODE IS NOT NULL
   UNION
   SELECT DISTINCT 
      sc.SDS_CLASS_CODE AS CLASS_CODE,
      sc.SDS_CLASS_NAME || ' [선택]' AS CLASS_NAME,
      sip.PRD_CODE AS PRD_CODE,
      sip.PRD_NAME AS PRD_NAME,
      mip.PRD_CODE AS SUB_CODE,
      mip.SHOP_CODE
   FROM MST_SIDE_SEL_GROUP sg
      LEFT JOIN MST_INFO_PRODUCT mip 
         ON sg.SHOP_CODE = mip.SHOP_CODE 
            AND sg.SDS_GROUP_CODE = mip.SDS_GROUP_CODE
      LEFT JOIN MST_SIDE_SEL_CLASS sc 
         ON sg.SHOP_CODE = sc.SHOP_CODE
            AND sg.SDS_GROUP_CODE = sc.SDS_GROUP_CODE
      LEFT JOIN MST_SIDE_SEL_CODE lc
         ON sc.SDS_CLASS_CODE = lc.SDS_CLASS_CODE
         --AND lc.PRD_CODE = mip.PRD_CODE
      LEFT JOIN MST_INFO_PRODUCT sip 
         ON sip.PRD_CODE = lc.PRD_CODE 
   WHERE sg.USE_YN = 'Y' AND sc.USE_YN = 'Y' AND lc.USE_YN = 'Y'
) side
WHERE side.SUB_CODE = @PRD_CODE AND side.SHOP_CODE = @SHOP_CODE AND PRD_CODE = @SUB_CODE	
</GetPrdProperties>

<GetTableInfo>
    SELECT *
    FROM	MST_TABLE_INFO                          
    WHERE	USE_YN    = 'Y'
    	and	SHOP_CODE = @SHOP_CODE
    ORDER BY TABLE_CODE 
</GetTableInfo>

<GetTableDept>
    SELECT *
    FROM	MST_TABLE_DEPT                       
    WHERE	USE_YN    = 'Y'
    	and	SHOP_CODE = @SHOP_CODE
</GetTableDept>